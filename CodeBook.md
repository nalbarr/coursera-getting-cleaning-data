# Coursera - Getting and Cleaning Data
# Week 4 - Project
## Student:  Narciso Albarracin

### CodeBook.md

#### Overview
The following major steps were used to analyze and process the UCI Human Activity Recognition (HAR) data set.  Each step include sub steps that are described in detail.

* Merge training and test data sets
* For each measurement, only extract only mean and standard deviation
* Name variables descriptively
* Label datset with descriptive names
* From #4, extract tidy data set representing average for each subject and each activity

The input data files are:
i.e., at "UCI HAR Dataset" directory
- ./features.txt
- ./features_info.txt
- ./activity_labels.txt
- ./train/X_train.txt
- ./train/y_train.txt
- ./train/subject_train.txt
- ./test/X_test.txt
- ./test/y_test.txt

- ./test/subject_test.txt

features.txt, features_info.txt and activity_labels.txt files active as code description tables with a numeric key and human readable description.

Training versus test data is split between the training and test folders, but the file structures are similar for both sets of subject, X, y files.  The subject file include numeric identifiers for test subjects.  The y files are the (predicted) class as activity type (e.g., WALKING, etc.)  The x files are feature vectors with measurements stored across columns.

This project manipulates these input files in 4 major steps which will load data into R, load them into manipulation structures such as data frames and data tables and having to merge, join, select and filter for different purposes.

For example, data streams were generated by an Android mobile device and have technical names that will be translated and mapped by run_analysis.R script. 

Although there are other sensor data available such as inertia data.  They are OUT OF SCOPE for this project.

#### Technical Overview, Data Analysis and Processing

The following steps are additionally described within R processing script - run_analysis.R as inline comments.

##### 1. Merge training and test data sets
- 1a. Change working directory to process UCI HAR input data set files.
- 1b. Read files into data frames.
- 1c. Convert data frames into data tables
- 1d. Rename key columns to prepare for merge training and test data tables
- 1e. Create surrogate identity column for merging
- 1f. For training data, merge data tables based on identity column
- 1g. For test data, merge data tables based on identity column
- 1h. Append training and test data tables

##### 2. For each measurement, only extract only mean and standard deviation
- 2a. Set up new data data table for intermediate processing
- 2b. Map feature (descriptive) names to features ids
- 2c. Subset combined data table based on logical vector for required column names (e.g., variable means and standard deviations)

##### 3. Use descriptive activity names to name the activities in the data set
- 3a.  Set up new data data table for intermediate processing
- 3b.  Merge current data table with activities data table based on activity.id key

##### 4. Label data set with descriptive names
- 4a. Set up new data data table for intermediate processing
- 4b. Use regular expressions to match unfriendly names and replace them with friendly names.
- 4c. Rename data table columns

##### 5. From #4, extract tidy data set representing average for each subject and each activity
- 5a. Set up new data data table for intermediate processing
- 5b. Remove unncessary columns prior to computing mean (e.g., activity.name)
- 5c. Compute mean for each measurement by subject.id and activity.id
- 5d. Remove unnecessary columns (i.e., "subject.id", "activity.id")
- 5e. Export tidy data set

#### Codes and data descriptions

The best way to understand the data input semantics and context is to view data during step #1 while loading from data input files and prior to export a tidy data set.

##### BEFORE (pre step #1)
list.dts$features

V1                                   V2
1:   1                    tBodyAcc-mean()-X
2:   2                    tBodyAcc-mean()-Y
3:   3                    tBodyAcc-mean()-Z
4:   4                     tBodyAcc-std()-X
5:   5                     tBodyAcc-std()-Y
---
  557: 557     angle(tBodyGyroMean,gravityMean)
558: 558 angle(tBodyGyroJerkMean,gravityMean)
559: 559                 angle(X,gravityMean)
560: 560                 angle(Y,gravityMean)
561: 561                 angle(Z,gravityMean)

list.dts$activities

V1                 V2
1:  1            WALKING
2:  2   WALKING_UPSTAIRS
3:  3 WALKING_DOWNSTAIRS
4:  4            SITTING
5:  5           STANDING
6:  6             LAYING

list.dts$subjects.train

V1
1:  1
2:  1
3:  1
4:  1
5:  1
---
  7348: 30
7349: 30
7350: 30
7351: 30
7352: 30

list.dts$x.train

V1           V2          V3         V4          V5          V6         V7          V8
1: 0.2885845 -0.020294171 -0.13290514 -0.9952786 -0.98311061 -0.91352645 -0.9951121 -0.98318457
2: 0.2784188 -0.016410568 -0.12352019 -0.9982453 -0.97530022 -0.96032199 -0.9988072 -0.97491437
3: 0.2796531 -0.019467156 -0.11346169 -0.9953796 -0.96718701 -0.97894396 -0.9965199 -0.96366837
4: 0.2791739 -0.026200646 -0.12328257 -0.9960915 -0.98340270 -0.99067510 -0.9970995 -0.98274984
5: 0.2766288 -0.016569655 -0.11536185 -0.9981386 -0.98081727 -0.99048163 -0.9983211 -0.97967187
---
  7348: 0.2996653 -0.057193414 -0.18123302 -0.1953865  0.03990485  0.07707808 -0.2823006  0.04361563
7349: 0.2738527 -0.007749326 -0.14746837 -0.2353085  0.00481628  0.05927999 -0.3225523 -0.02945625
7350: 0.2733874 -0.017010616 -0.04502183 -0.2182182 -0.10382198  0.27453270 -0.3045152 -0.09891303
7351: 0.2896542 -0.018843044 -0.15828059 -0.2191394 -0.11141169  0.26889320 -0.3104875 -0.06820033
7352: 0.3515035 -0.012423118 -0.20386717 -0.2692704 -0.08721154  0.17740393 -0.3774040 -0.03867806

list.dts$y.train

1:  5
2:  5
3:  5
4:  5
5:  5
---
  7348:  2
7349:  2
7350:  2
7351:  2
7352:  2

##### AFTER (post step #4)
dt4
       activity.id timeBodyAccMagnitudeMean timeBodyAccMagnitudeStdDevation
    1:           1              -0.22455962                      -0.2379807
    2:           1              -0.12650269                      -0.2133903
    3:           1              -0.16010001                      -0.2575711
    4:           1              -0.07351308                      -0.1951145
    5:           1              -0.04949205                      -0.2110254
   ---                                                                     
10295:           6              -0.98884319                      -0.9917777
10296:           6              -0.98174811                      -0.9873845
10297:           6              -0.98244389                      -0.9854095
10298:           6              -0.98609335                      -0.9902433
10299:           6              -0.98342545                      -0.9923642
       timeGravityAccMagnitudeMean timeGravityAccMagnitudeStdDevation
    1:                 -0.22455962                         -0.2379807
    2:                 -0.12650269                         -0.2133903
    3:                 -0.16010001                         -0.2575711
    4:                 -0.07351308                         -0.1951145
    5:                 -0.04949205                         -0.2110254
   ---                                                               
10295:                 -0.98884319                         -0.9917777
10296:                 -0.98174811                         -0.9873845
10297:                 -0.98244389                         -0.9854095
10298:                 -0.98609335                         -0.9902433
10299:                 -0.98342545                         -0.9923642
       timeBodyAccJerkMagnitudeMean timeBodyAccJerkMagnitudeStdDevation
    1:                   -0.2894243                          -0.1650001
    2:                   -0.1385012                          -0.1985903
    3:                   -0.1943548                          -0.2199436
    4:                   -0.1294801                          -0.1739346
    5:                   -0.1598686                          -0.1498507
   ---                                                                 
10295:                   -0.9902476                          -0.9920228
10296:                   -0.9867954                          -0.9905751
10297:                   -0.9880591                          -0.9916558
10298:                   -0.9910350                          -0.9934461
10299:                   -0.9886198                          -0.9909061
       timeBodyGyroMagnitudeMean timeBodyGyroMagnitudeStdDevation
    1:               -0.03439560                      -0.16818626
    2:               -0.14093823                      -0.21605518
    3:               -0.09459356                      -0.29084739
    4:               -0.04934062                      -0.09012390
    5:               -0.02141046                      -0.04463632
   ---                                                           
10295:               -0.98847990                      -0.98537004
10296:               -0.98444333                      -0.98240760
10297:               -0.98266539                      -0.98312491
10298:               -0.98276016                      -0.98127808
10299:               -0.97959682                      -0.97870913
       timeBodyGyroJerkMagnitudeMean timeBodyGyroJerkMagnitudeStdDevation
    1:                    -0.4661497                           -0.4336540
    2:                    -0.3899198                           -0.4389841
    3:                    -0.3741507                           -0.4180319
    4:                    -0.2364741                           -0.2294418
    5:                    -0.2200966                           -0.2127722
   ---                                                                   
10295:                    -0.9893181                           -0.9884941
10296:                    -0.9848154                           -0.9868671
10297:                    -0.9840703                           -0.9889891
10298:                    -0.9873932                           -0.9912512
10299:                    -0.9882131                           -0.9885650
       freqBodyAccMagnitudeMean freqBodyAccMagnitudeStdDevation
    1:              -0.16681083                      -0.3995829
    2:              -0.07927762                      -0.4230300
    3:              -0.15631258                      -0.4368583
    4:              -0.10437689                      -0.3762153
    5:              -0.12319532                      -0.3878596
   ---                                                         
10295:              -0.99175364                      -0.9920716
10296:              -0.98726145                      -0.9883995
10297:              -0.98658361                      -0.9858340
10298:              -0.99075249                      -0.9903920
10299:              -0.99268415                      -0.9923438
       freqBodyAccJerkMagnitudeMean freqBodyAccJerkMagnitudeStdDevation
    1:                   -0.1540448                          -0.1846900
    2:                   -0.1784456                          -0.2306563
    3:                   -0.1494380                          -0.3212563
    4:                   -0.1322222                          -0.2326118
    5:                   -0.1160875                          -0.2010365
   ---                                                                 
10295:                   -0.9909836                          -0.9923899
10296:                   -0.9891111                          -0.9914063
10297:                   -0.9905583                          -0.9921421
10298:                   -0.9936677                          -0.9915172
10299:                   -0.9904162                          -0.9902372
       freqBodyGyroMagnitudeMean freqBodyGyroMagnitudeStdDevation
    1:              -0.222176040                       -0.2736495
    2:              -0.268279820                       -0.3146234
    3:              -0.308670720                       -0.4014002
    4:              -0.060131490                       -0.2746461
    5:              -0.003821466                       -0.2462486
   ---                                                           
10295:              -0.985383580                       -0.9877505
10296:              -0.981451300                       -0.9861809
10297:              -0.982940420                       -0.9860755
10298:              -0.983046410                       -0.9830186
10299:              -0.979559350                       -0.9815917
       freqBodyGyroJerkMagnitudeMean freqBodyGyroJerkMagnitudeStdDevation
    1:                    -0.4318317                           -0.4763701
    2:                    -0.4281859                           -0.4928844
    3:                    -0.4010383                           -0.4819242
    4:                    -0.2176688                           -0.2992263
    5:                    -0.1875509                           -0.3003380
   ---                                                                   
10295:                    -0.9889995                           -0.9881846
10296:                    -0.9861487                           -0.9884832
10297:                    -0.9874496                           -0.9920103
10298:                    -0.9908205                           -0.9921368
10299:                    -0.9875887                           -0.9902872
       subject.id activity.name
    1:          1       WALKING
    2:          1       WALKING
    3:          1       WALKING
    4:          1       WALKING
    5:          1       WALKING
   ---                         
10295:         24        LAYING
10296:         24        LAYING
10297:         24        LAYING
10298:         24        LAYING
10299:         24        LAYING

